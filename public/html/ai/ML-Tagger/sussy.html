<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contribute to ML-Tagger</title>

    <!-- Google Fonts -->

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@100;200;300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Favicon -->

    <link rel="icon" href="../../kevlu8.jpg" type="image/x-icon">
    
    <!-- CSS -->

    <link rel="stylesheet" type='text/css' href="../../css/main.css">
</head>
<body>
    <header>
        <nav>
            <a href="/" class="logo">#</a>

            <div class="nav-container">
                <a href="/">Home</a>
                <a href="/about">About</a>
                <a href="/contact">Contact</a>
                <a href="/quotes">Quotes</a>
            </div>
        </nav>
    </header>

    <h1>Contribute to へんたい tagging</h1>
    
    <input type="submit" value="Next Post" onclick="submit()">
    <br>
    <h3 id="postTitle"></h3>
    <img id="image" src="" hidden="true">

    <script type="text/javascript">
        function submit() {
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = () => {
                let lnk = "", ttl = "";
                if (xhr.readyState === 4) {
                    let a = xhr.response.slice(1, -1);
                    let b = a.split(",");
                    let c = b[0].slice(1, -1);
                    let d = b[1].slice(1, -1);
                    lnk = c, ttl = d;
                    document.getElementById("image").src = lnk;
                    document.getElementById("imgLink").name = lnk;
                    document.getElementById("image").hidden = false;
                    document.getElementById("postTitle").innerHTML = ttl;
                    document.getElementById("tag").hidden = false;
                }
            }
            xhr.open('post', '/api/reddit/sussy', true);
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');
            xhr.send();
        }
    </script>

    <form id="tag" action="/api/aistorage/tag" method="POST" hidden="true">
        <input name="sussy" hidden="true">
        <input type="text" class="longAnswer"  placeholder="Enter tags separated by commas here" name="tags">
        <input id="imgLink" name="" type="text" hidden="true">
        <input type="submit" value="Submit">
    </form>
</body>
</html>